!function(){try{var e="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{},t=(new e.Error).stack;t&&(e._sentryDebugIds=e._sentryDebugIds||{},e._sentryDebugIds[t]="953be5a3-11b7-4f00-8e06-04c88a588a84",e._sentryDebugIdIdentifier="sentry-dbid-953be5a3-11b7-4f00-8e06-04c88a588a84")}catch(e){}}();var _global="undefined"!=typeof window?window:"undefined"!=typeof global?global:"undefined"!=typeof self?self:{};_global.SENTRY_RELEASE={id:"5.5.1 (2024123091)"},(self.webpackChunkweb=self.webpackChunkweb||[]).push([[47689],{793437:(e,t,r)=>{r.d(t,{X:()=>OpenInAppButton});var n=r(586330),o=r(514041),a=r(908867),s=r(17617),i=r(490343),c=r(889949),l=r(726130),u=r(334439),d=r(663522),p=r(117746),m=r(911998),k=r(831085);function OpenInAppButton({buildDeepLinkUrl:e,buildFullUrl:t}){var r=(0,a.A)(),{result:f}=(0,m.yk)((0,n.A)((function*(){var t=e();return(yield p.Ay.linkingCanOpenURL(t))?t:""})),[e]),h=((0,o.useMemo)((function(){return d.Ay.isWebMobile?d.Ay.isWebMobileAndroid?"Open by OneKey Android":d.Ay.isWebMobileIOS?"Open by OneKey iOS":void 0:"Open by OneKey Desktop"}),[]),(0,o.useCallback)((0,n.A)((function*(){var e=yield t();i.Dialog.show({title:r.formatMessage({id:u.ETranslations.open_in_mobile_app}),floatingPanelProps:{overflow:"hidden"},renderContent:(0,k.jsxs)(i.Stack,{children:[(0,k.jsx)(i.Stack,{alignItems:"center",justifyContent:"center",overflow:"hidden",children:(0,k.jsx)(i.Stack,{p:"$4",borderRadius:"$6",borderCurve:"continuous",borderWidth:s.A.hairlineWidth,borderColor:"$borderSubdued",children:(0,k.jsx)(i.QRCode,{value:e,logo:c,logoSize:40,size:224})})}),(0,k.jsxs)(i.XStack,{m:"$-5",mt:"$5",py:"$4",px:"$5",backgroundColor:"$bgSubdued",alignItems:"center",children:[(0,k.jsx)(i.SizableText,{size:"$bodyMd",color:"$textSubdued",flex:1,children:r.formatMessage({id:u.ETranslations.dont_have_mobile_app_yet})}),(0,k.jsx)(i.Button,{size:"small",onPress:function(){(0,p.Dr)(l.A8)},children:r.formatMessage({id:u.ETranslations.global_download})})]})]}),showFooter:!1})})),[t,r]));return(0,k.jsx)(i.Button,{size:"small",onPress:h,"data-sentry-element":"Button","data-sentry-component":"OpenInAppButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/OpenInAppButton/index.tsx",children:r.formatMessage({id:u.ETranslations.open_in_mobile_app})})}},292600:(e,t,r)=>{r.d(t,{O:()=>ReviewControl,T:()=>useReviewControl});var n=r(471169),o=r(663522),useReviewControl=function(){var[{reviewControl:e}]=(0,n.useSettingsPersistAtom)();return!o.Ay.isAppleStoreEnv&&!o.Ay.isMas||Boolean(e)},ReviewControl=function({children:e}){return useReviewControl()?e:null}},407430:(e,t,r)=>{r.d(t,{B:()=>HeaderLeft});var n=r(586330),o=r(514041),a=r(908867),s=r(490343),i=r(334439),c=r(193068),l=r(595346),u=r(714191),d=r(317522),p=r(904121),m=r(812979),k=r(831085);function HeaderLeft({sceneName:e}){var t,r=(0,a.A)(),{tourTimes:f,tourVisited:h}=(0,m.c1)(l.A.switchDappAccount),[g,y]=(0,o.useState)(!1);(0,d.A)(c.V4.Home,(t=(0,n.A)((function*(e,t){y(!t&&e)})),function(e,r){return t.apply(this,arguments)}));var b=(0,o.useMemo)((function(){return 1===f&&g}),[g,f]),w=(0,o.useMemo)((function(){return e===u.Zs.homeUrlAccount?(0,k.jsx)(s.Page.Close,{children:(0,k.jsx)(s.NavBackButton,{})}):(0,k.jsx)(p.Qt,{num:0,spotlightProps:{visible:b,content:(0,k.jsx)(s.SizableText,{size:"$bodyMd",children:r.formatMessage({id:i.ETranslations.spotlight_account_alignment_desc})}),onConfirm:function(){h(2)},childrenPaddingVertical:0}},"accountSelectorTrigger")}),[r,e,b,h]);return(0,k.jsx)(p.b8,{enabledNum:[0],config:{sceneName:e,sceneUrl:""},"data-sentry-element":"AccountSelectorProviderMirror","data-sentry-component":"HeaderLeft","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/TabPageHeader/HeaderLeft.tsx",children:w})}},145337:(e,t,r)=>{r.d(t,{i:()=>TabPageHeader});var n=r(514041),o=r(490343),a=r(396304),s=r(162616),i=r(208257),c=r(904121),l=r(407430),u=r(586330),d=r(908867),p=r(896666),m=r(384013),k=r(471169),f=r(334439),h=r(296827),g=r(663522),y=r(193068),b=r(251039),w=r(187576),S=r(596020),x=r(714191),M=r(643087),v=r(498356),j=r(793437),A=r(211129),T=r(491180),P=r(796151),O=r(826339),I=r(831085);function OpenInAppButtonContainer(){var{activeAccount:{account:e,network:t}}=(0,s.LH)({num:0}),r=(0,n.useCallback)((function(){return e&&t?P.Ay.buildDeepLinkUrl({path:A.oO.url_account,query:{networkCode:t.code,address:e.address}}):""}),[e,t]),o=(0,n.useCallback)((0,u.A)((function*(){return e&&t?(0,O.Hw)({account:e,network:t}):"n"})),[e,t]);return e?.address&&t?.id?(0,I.jsx)(j.X,{buildDeepLinkUrl:r,buildFullUrl:o,"data-sentry-element":"OpenInAppButton","data-sentry-component":"OpenInAppButtonContainer","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/pages/urlAccount/UrlAccountNavHeader.tsx"}):null}function ShareButton(){var{activeAccount:{account:e,network:t}}=(0,s.LH)({num:0}),{shareText:r}=(0,o.useShare)();return e?.address&&t?.id?(0,I.jsx)(o.HeaderIconButton,{onPress:(0,u.A)((function*(){var n=yield(0,O.Hw)({account:e,network:t});yield r(n)})),icon:"ShareOutline","data-sentry-element":"HeaderIconButton","data-sentry-component":"ShareButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/pages/urlAccount/UrlAccountNavHeader.tsx"}):null}var $={Address:function Address(){var{activeAccount:{account:e}}=(0,s.LH)({num:0});return(0,o.useMedia)(),(0,I.jsxs)(o.XStack,{alignItems:"center","data-sentry-element":"XStack","data-sentry-component":"Address","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/pages/urlAccount/UrlAccountNavHeader.tsx",children:[(0,I.jsx)(o.SizableText,{size:"$headingLg","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/pages/urlAccount/UrlAccountNavHeader.tsx",children:T.A.shortenAddress({address:e?.address})}),null]})},OpenInApp:function OpenInApp(){return(0,I.jsx)(c.b8,{config:{sceneName:x.Zs.homeUrlAccount,sceneUrl:""},enabledNum:[0],"data-sentry-element":"AccountSelectorProviderMirror","data-sentry-component":"OpenInApp","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/pages/urlAccount/UrlAccountNavHeader.tsx",children:(0,I.jsx)(OpenInAppButtonContainer,{"data-sentry-element":"OpenInAppButtonContainer","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/pages/urlAccount/UrlAccountNavHeader.tsx"})})},Share:function Share(){return(0,I.jsx)(c.b8,{config:{sceneName:x.Zs.homeUrlAccount,sceneUrl:""},enabledNum:[0],"data-sentry-element":"AccountSelectorProviderMirror","data-sentry-component":"Share","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/pages/urlAccount/UrlAccountNavHeader.tsx",children:(0,I.jsx)(ShareButton,{"data-sentry-element":"ShareButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Home/pages/urlAccount/UrlAccountNavHeader.tsx"})})}},C=r(834015),H=r(390574),_=r(747268),L=r(506851),E=r(89345),B=_.H.SearchInPage;function UniversalSearchInput(){var e=(0,d.A)(),t=(0,v.A)(),r=(0,n.useCallback)((function(){t.pushModal(y.ry.UniversalSearchModal,{screen:H.j.UniversalSearch,params:{filterType:L.j.Address}})}),[t]);return(0,E.U)(B,r),(0,I.jsxs)(o.XStack,{w:280,"data-sentry-element":"XStack","data-sentry-component":"UniversalSearchInput","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/TabPageHeader/UniversalSearchInput.tsx",children:[(0,I.jsx)(o.Input,{leftIconName:"SearchOutline",containerProps:{w:"100%"},size:"small",addOns:[{label:(0,I.jsx)(o.Shortcut,{shortcutKey:B})}],placeholder:e.formatMessage({id:f.ETranslations.global_search_address}),"data-sentry-element":"Input","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/TabPageHeader/UniversalSearchInput.tsx"},"searchInput"),(0,I.jsx)(o.View,{position:"absolute",top:0,left:0,right:0,bottom:0,onPress:r,"data-sentry-element":"View","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/TabPageHeader/UniversalSearchInput.tsx"})]})}function HeaderRight({sceneName:e}){var t=(0,d.A)(),r=(0,v.A)(),a=(0,C.A)(),[{firstTimeGuideOpened:i,badge:c}]=(0,k.useNotificationsAtom)(),[l]=(0,k.useDevSettingsPersistAtom)(),{activeAccount:{account:j}}=(0,s.LH)({num:0}),[A]=(0,m.RI)(),[T]=(0,m.D4)(),P=(0,n.useCallback)((function(){r.pushModal(y.ry.SettingModal,{screen:y.Pj.SettingListModal})}),[r]),O=(0,n.useCallback)((function(){return a.start({handlers:a.PARSE_HANDLER_NAMES.all,autoHandleResult:!0,account:j,tokens:{data:A.tokens,keys:A.keys,map:T}})}),[a,j,A,T]),H=(0,o.useMedia)(),_=(0,n.useCallback)((0,u.A)((function*(){r.pushModal(y.ry.NotificationsModal,{screen:b.f.NotificationList})})),[r]),L=(0,n.useMemo)((function(){var r,n,a,s=H.gtMd?null:(0,I.jsx)(p.v$,{title:(0,I.jsxs)(o.XStack,{gap:"$2",children:[(0,I.jsx)(o.Tooltip.Text,{children:t.formatMessage({id:f.ETranslations.settings_settings})}),(0,I.jsxs)(o.Shortcut,{pl:"$2",children:[(0,I.jsx)(o.Shortcut.Key,{children:w.s.CmdOrCtrl}),(0,I.jsx)(o.Shortcut.Key,{children:","})]})]}),titlePlacement:"bottom",icon:"SettingsOutline",testID:"setting",onPress:P},"setting"),d={routes:""},m=(0,I.jsx)(o.ActionList,{title:t.formatMessage({id:f.ETranslations.global_layout}),items:[g.Ay.isExtensionUiPopup?{label:t.formatMessage({id:f.ETranslations.open_as_sidebar}),icon:"LayoutRightOutline",onPress:(a=(0,u.A)((function*(){h.U.account.wallet.openSidePanel(),yield S.Ay.openPanelOnActionClick(!0),yield S.Ay.openSidePanel(d),window.close()})),function onPress(){return a.apply(this,arguments)})}:{label:t.formatMessage({id:f.ETranslations.open_as_popup}),icon:"LayoutTopOutline",onPress:(n=(0,u.A)((function*(){yield S.Ay.openPanelOnActionClick(!1),window.close()})),function onPress(){return n.apply(this,arguments)})},{label:t.formatMessage({id:f.ETranslations.global_expand_view}),icon:"ExpandOutline",onPress:(r=(0,u.A)((function*(){h.U.account.wallet.openExpandView(),window.close(),yield M.A.serviceApp.openExtensionExpandTab(d)})),function onPress(){return r.apply(this,arguments)})}],renderTrigger:(0,I.jsx)(p.v$,{title:t.formatMessage({id:f.ETranslations.global_layout}),icon:"LayoutRightOutline"},"layoutRightView")},"layoutExtView"),k=(0,I.jsx)(p.v$,{title:t.formatMessage({id:f.ETranslations.scan_scan_qr_code}),icon:"ScanOutline",onPress:O},"scan"),y=(0,I.jsxs)(o.Stack,{testID:"headerRightNotificationsButton",children:[(0,I.jsx)(p.v$,{title:t.formatMessage({id:f.ETranslations.global_notifications}),icon:"BellOutline",onPress:_}),!i||c?(0,I.jsx)(o.Stack,{position:"absolute",right:"$-2.5",top:"$-2",alignItems:"flex-end",w:"$10",pointerEvents:"none",children:(0,I.jsx)(o.Stack,{bg:"$bgApp",borderRadius:"$full",borderWidth:2,borderColor:"$transparent",children:(0,I.jsx)(o.Stack,{px:"$1",borderRadius:"$full",bg:"$bgCriticalStrong",minWidth:"$4",height:"$4",alignItems:"center",justifyContent:"center",children:i?(0,I.jsx)(o.SizableText,{color:"$textOnColor",size:"$bodySm",children:c&&c>99?"99+":c}):(0,I.jsx)(o.Stack,{width:"$1",height:"$1",backgroundColor:"white",borderRadius:"$full"})})})}):null]},"notifications"),b=H.gtMd?(0,I.jsx)(UniversalSearchInput,{},"searchInput"):null;return e===x.Zs.homeUrlAccount?[(0,I.jsx)($.OpenInApp,{},"urlAccountOpenInApp"),(0,I.jsx)($.Share,{},"urlAccountShare")].filter(Boolean):g.Ay.isExtensionUiPopup||g.Ay.isExtensionUiSidePanel?[m,y,s].filter(Boolean):(l.enabled||(y=null),[k,y,s,b].filter(Boolean))}),[t,P,O,_,i,c,H.gtMd,e,l.enabled]);return(0,I.jsx)(p.bE,{testID:"Wallet-Page-Header-Right",className:"app-region-no-drag","data-sentry-element":"HeaderButtonGroup","data-sentry-component":"HeaderRight","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/TabPageHeader/HeaderRight.tsx",children:L})}function HeaderTitle({sceneName:e}){var t=(0,n.useMemo)((function(){if(e===x.Zs.homeUrlAccount)return(0,I.jsx)($.Address,{},"urlAccountNavHeaderAddress")}),[e]);return(0,I.jsx)(c.b8,{enabledNum:[0],config:{sceneName:e,sceneUrl:""},"data-sentry-element":"AccountSelectorProviderMirror","data-sentry-component":"HeaderTitle","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/TabPageHeader/HeaderTitle.tsx",children:t})}function TabPageHeader({sceneName:e,showHeaderRight:t}){(0,a.eX)({name:`web TabPageHeader:${e}:${String(t)}`});var r=(0,n.useCallback)((function(){return(0,I.jsx)(l.B,{sceneName:e})}),[e]),{config:u}=(0,s.H9)(),d=(0,n.useCallback)((function(){return t&&u?(0,I.jsx)(i.p,{children:(0,I.jsx)(c.b8,{enabledNum:[0],config:u,children:(0,I.jsx)(HeaderRight,{sceneName:e})})}):null}),[u,e,t]),p=(0,n.useCallback)((function(){return(0,I.jsx)(HeaderTitle,{sceneName:e})}),[e]);return(0,I.jsx)(I.Fragment,{children:(0,I.jsx)(o.Page.Header,{headerTitle:p,headerLeft:r,headerRight:d,"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/components/TabPageHeader/index.tsx"})})}},323104:(e,t,r)=>{r.d(t,{A:()=>useHomePageWidth});var n=r(514041),o=r(812715),a=r(490343),s=r(40651),i=r(427745);function useHomePageWidth(){var e=(0,a.useMedia)(),t=(0,o.A)().width,r=(0,n.useMemo)((function(){return(0,i.RQ)().size.sideBarWidth.val}),[]),{leftSidebarCollapsed:c}=(0,s.A)();return{screenWidth:t,pageWidth:e.md||c?t:t-r}}},847689:(e,t,r)=>{r.r(t),r.d(t,{default:()=>MarketHomeWithProvider});var n=r(324586),o=r(514041),a=r(546591),s=r(462723),i=r(490343),c=r(471169),l=r(318822),u=r(663522),d=r(714191),p=r(643087),m=r(904121),k=r(911998),f=r(323104),h=r(407430),g=r(217715),y=r(831085);function MarketHomeHeader(){var e=(0,o.useCallback)((function(){return(0,y.jsx)(h.B,{sceneName:d.Zs.home})}),[]),t=(0,o.useCallback)((function(){return(0,y.jsx)(i.Stack,{width:280,children:(0,y.jsx)(g.I,{})})}),[]);return(0,y.jsx)(i.Page.Header,{headerLeft:e,headerRight:t,"data-sentry-element":"unknown","data-sentry-component":"MarketHomeHeader","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeHeader.tsx"})}var b=r(145337);function MarketHomeHeader_md_MarketHomeHeader(){return(0,y.jsxs)(y.Fragment,{children:[(0,y.jsx)(b.i,{sceneName:d.Zs.home,"data-sentry-element":"TabPageHeader","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeHeader.md.tsx"}),(0,y.jsx)(i.Stack,{px:"$5",py:"$3","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeHeader.md.tsx",children:(0,y.jsx)(g.I,{"data-sentry-element":"MarketHomeHeaderSearchBar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeHeader.md.tsx"})})]})}var w=r(586330),S=r(908867),x=r(701732),M=r(17617),v=r(812715),j=r(32943),A=r(334439),T=r(296827),P=r(351453),O=r(193068),I=r(18910),$=r(584186),C=r(317192),H=r(292600),_=r(498356),L=r(394764),E=r(825903),B=r(123890);function MarketListTradeButton({coinGeckoId:e,symbol:t,isSupportBuy:r}){var n=(0,S.A)(),{onStaking:a,onSwapLazyModal:s,onBuy:c}=(0,B.z6)(e),l=(0,o.useMemo)((function(){return(0,C.r)(t)}),[t]);return(0,y.jsxs)(i.XStack,{gap:"$1.5","data-sentry-element":"XStack","data-sentry-component":"MarketListTradeButton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketListTradeButton.tsx",children:[(0,y.jsx)(i.Button,{variant:"secondary",size:"small",onPress:s,"data-sentry-element":"Button","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketListTradeButton.tsx",children:n.formatMessage({id:A.ETranslations.global_trade})}),r?(0,y.jsx)(H.O,{children:(0,y.jsx)(i.Button,{variant:"secondary",size:"small",onPress:c,children:n.formatMessage({id:A.ETranslations.global_buy})})}):null,l?(0,y.jsx)(i.Button,{variant:"secondary",size:"small",onPress:a,children:n.formatMessage({id:A.ETranslations.earn_stake})}):null]})}var z=r(839850),N=r(450255),D=["coingeckoId","symbol","showMoreAction","isSupportBuy"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var U=(0,o.memo)((function BasicMarketMore(e){var{coingeckoId:t,symbol:r,showMoreAction:n,isSupportBuy:a}=e,s=(0,z.A)(e,D),c=(0,S.A)(),l=(0,N.B)(),u=(0,o.useCallback)((function(){l.MoveToTop(t)}),[l,t]),d=(0,B.z6)(t),p=(0,H.T)(),m=(0,o.useMemo)((function(){return[n&&{items:[{icon:"ArrowTopOutline",label:c.formatMessage({id:A.ETranslations.market_move_to_top}),onPress:u}]},p?{items:[{icon:"MinusLargeSolid",label:c.formatMessage({id:A.ETranslations.global_sell}),onPress:d.onSell,disabled:!a}]}:void 0].filter(Boolean)}),[u,c,a,p,n,d.onSell]);return(0,y.jsx)(i.ActionList,{title:"",renderTrigger:(0,y.jsx)(i.IconButton,_objectSpread({title:c.formatMessage({id:A.ETranslations.global_more}),icon:"DotVerSolid",variant:"tertiary",iconSize:"$5",disabled:0===m.length},s)),sections:m,"data-sentry-element":"ActionList","data-sentry-component":"BasicMarketMore","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketMore.tsx"})})),W=r(172120),R=r(202338),X=r(378302),K=r(781889),F=(0,o.forwardRef)((function({height:e,width:t},r){return(0,y.jsx)(i.View,{width:t,height:e,children:(0,y.jsx)("canvas",{style:{width:`${t}px`,height:`${e}px`},ref:r})})}));F.displayName="Canvas";const G=(0,o.memo)((function({data:e,lineColor:t,linearGradientColor:r,height:n=40,width:a=50,lineWidth:s=1,smooth:i=!0,scale:c=.1}){var l,u=(0,o.useMemo)((function(){return window.devicePixelRatio||1}),[]),d=(0,E.YE)(),p=(0,o.useCallback)((l=(0,w.A)((function*(o){if(o){o.width=a*u,o.height=n*u;var l=n-5,p=e||[],m=Math.max(...p),k=Math.min(...p),f=l/(m-k),h=o.getContext("2d");if(h){h.scale(u,u),h.beginPath(),h.lineWidth=s,h.strokeStyle=t;var g=a/(p.length-1),y=0,b=0;p.forEach((function(e,t){var r=l-(e-k)*f;if(i&&t>=2&&t<p.length-1){var n=g*(t-1),o=l-(p[t-1]-k)*f,a=g*(t-2),s=l-(p[t-2]-k)*f,u=g*(t+1),d=l-(p[t+1]-k)*f,m=n+(y-a)*c,w=o+(r-s)*c,S=y-(u-n)*c,x=r-(d-o)*c;w<0&&(w=0),x<0&&(x=0),h.bezierCurveTo(m,w,S,x,y,r)}else h.lineTo(y,r);t===p.length-1&&(b=r),y+=g})),h.lineTo(y+g,b),h.lineTo(y+g,n),h.lineTo(0,n),h.stroke(),h.closePath();var w=h.createLinearGradient(0,0,0,l);w.addColorStop(0,r),w.addColorStop(1,"dark"===d?"rgba(0,0,0,0)":"rgba(255,255,255,0)"),h.fillStyle=w,h.fill(),h.clearRect(0,n-s,a,s)}}})),function(e){return l.apply(this,arguments)}),[a,u,n,e,s,t,r,d,i,c]);return(0,y.jsx)(F,{width:a,height:n,ref:p,"data-sentry-element":"Canvas","data-sentry-component":"SparkLineChart","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/SparklineChart.tsx"})}));var V=r(610101);function MarketHomeList_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MarketHomeList_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MarketHomeList_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MarketHomeList_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var Y={light:["rgba(0, 113, 63)","rgba(196, 0, 6)"],dark:["rgba(70, 254, 165)","rgba(255, 149, 146)"]},q={light:["rgba(0, 113, 63, 0.2)","rgba(196, 0, 6, 0.2)"],dark:["rgba(70, 254, 165, 0.2)","rgba(255, 149, 146, 0.2)"]},Z={gap:"$3",px:"$3",mx:"$2"},J={minHeight:"$4",py:"$2",borderRadius:"$3"};function ListEmptyComponent({columns:e}){var[t,r]=(0,o.useState)(!1);return(0,o.useEffect)((function(){var e=setTimeout((function(){r(!0)}),50);return function(){clearTimeout(e)}}),[]),t?(0,y.jsx)(i.Table.Skeleton,{count:6,columns:e,rowProps:Z}):null}function TableMdSkeletonRow(){return(0,y.jsxs)(i.XStack,{h:60,jc:"space-between",flex:1,"data-sentry-element":"XStack","data-sentry-component":"TableMdSkeletonRow","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:[(0,y.jsxs)(i.XStack,{gap:"$3",ai:"center","data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:[(0,y.jsx)(i.Skeleton,{w:"$10",h:"$10",radius:"round","data-sentry-element":"Skeleton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx"}),(0,y.jsxs)(i.YStack,{gap:"$2","data-sentry-element":"YStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:[(0,y.jsx)(i.Skeleton,{w:"$16",h:"$2.5","data-sentry-element":"Skeleton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx"}),(0,y.jsx)(i.Skeleton,{w:"$24",h:"$2.5","data-sentry-element":"Skeleton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx"})]})]}),(0,y.jsxs)(i.XStack,{gap:"$5",ai:"center","data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:[(0,y.jsx)(i.Skeleton,{w:"$16",h:"$2.5","data-sentry-element":"Skeleton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx"}),(0,y.jsx)(i.Skeleton,{w:"$16",h:"$2.5","data-sentry-element":"Skeleton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx"})]})]})}function MdPlaceholder(){return(0,y.jsx)(i.Stack,{borderRadius:"$2",width:"$20",height:"$8",bg:"$bgDisabled",jc:"center",ai:"center","data-sentry-element":"Stack","data-sentry-component":"MdPlaceholder","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:(0,y.jsx)(i.SizableText,{size:"$bodyMdMedium","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:"-"})})}var Q=j.Dc;function MarketMdColumn({item:e,currency:t,mdColumnKeys:r,showMoreAction:n}){var a=(0,_.A)(),s=(0,N.B)(),c=(0,o.useRef)(!1),l=(0,S.A)(),u=(0,o.useCallback)((function(){c.current||a.push(O.FE.MarketDetail,{token:e.coingeckoId})}),[e.coingeckoId,a]),d=(0,B.z6)(e.coingeckoId),p=(0,H.T)(),m=e.isSupportBuy&&p,k=(0,o.useMemo)((function(){return(0,C.r)(e.symbol)}),[e.symbol]),f=(0,o.useCallback)((0,w.A)((function*(){var{coingeckoId:t,symbol:r}=e,o=s.isInWatchList(t),a=r.toUpperCase();c.current=!0,i.ActionList.show({title:a,onClose:function(){c.current=!1},sections:[{items:[o?{destructive:!0,icon:"DeleteOutline",label:l.formatMessage({id:A.ETranslations.market_remove_from_watchlist}),onPress:function(){s.removeFormWatchList(t),T.U.market.token.removeFromWatchlist({tokenSymbol:t,removeWatchlistFrom:P.N.catalog})}}:{icon:"StarOutline",label:l.formatMessage({id:A.ETranslations.market_add_to_watchlist}),onPress:function(){s.addIntoWatchList(t),T.U.market.token.addToWatchList({tokenSymbol:t,addWatchlistFrom:P.N.catalog})}},n&&{icon:"ArrowTopOutline",label:l.formatMessage({id:A.ETranslations.market_move_to_top}),onPress:function(){s.MoveToTop(t)}}].filter(Boolean)},{items:[{icon:"SwitchHorOutline",label:l.formatMessage({id:A.ETranslations.global_trade}),onPress:d.onSwapLazyModal},k&&{icon:"CoinsOutline",label:l.formatMessage({id:A.ETranslations.earn_stake}),onPress:d.onStaking},m&&{icon:"PlusLargeSolid",label:l.formatMessage({id:A.ETranslations.global_buy}),onPress:d.onBuy},m&&{icon:"MinusLargeSolid",label:l.formatMessage({id:A.ETranslations.global_sell}),onPress:d.onSell}].filter(Boolean)}]})})),[s,k,l,e,m,n,d.onBuy,d.onSell,d.onStaking,d.onSwapLazyModal]),h=(0,o.useMemo)((function(){return{onPress:function(){return u()},onLongPress:function(){f()},delayLongPress:300}}),[f,u]);return(0,y.jsx)(Q,MarketHomeList_objectSpread(MarketHomeList_objectSpread({containerStyle:{flex:1},style:{flex:1}},h),{},{"data-sentry-element":"TouchableContainer","data-sentry-component":"MarketMdColumn","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:(0,y.jsxs)(i.XStack,MarketHomeList_objectSpread(MarketHomeList_objectSpread(MarketHomeList_objectSpread({height:60,flex:1,justifyContent:"space-between",userSelect:"none",gap:"$2",px:"$5"},I.Y),void 0),{},{"data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:[(0,y.jsxs)(i.XStack,{gap:"$3",ai:"center","data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:[(0,y.jsx)(R.t,{uri:e.image,size:"$10","data-sentry-element":"MarketTokenIcon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx"}),(0,y.jsxs)(i.YStack,{"data-sentry-element":"YStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:[(0,y.jsx)(i.SizableText,{size:"$bodyLgMedium",userSelect:"none","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:e.symbol.toUpperCase()}),(0,y.jsxs)(i.SizableText,{size:"$bodySm",color:"$textSubdued",userSelect:"none","data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:["VOL ",(0,y.jsx)(i.NumberSizeableText,{userSelect:"none",size:"$bodySm",formatter:"marketCap",color:"$textSubdued",formatterOptions:{currency:t},"data-sentry-element":"NumberSizeableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:e.totalVolume})]})]})]}),(0,y.jsxs)(i.XStack,{ai:"center",gap:"$5",flexShrink:1,"data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:["price"===r[0]?(0,y.jsx)(X.D,{numberOfLines:1,flexShrink:1,size:"$bodyLgMedium",price:String(e[r[0]]),tokenName:e.name,tokenSymbol:e.symbol,lastUpdated:e.lastUpdated}):(0,y.jsx)(i.NumberSizeableText,{userSelect:"none",flexShrink:1,numberOfLines:1,size:"$bodyLgMedium",formatter:"marketCap",formatterOptions:{currency:t},children:e[r[0]]}),e[r[1]]?(0,y.jsx)(i.XStack,{width:"$20",height:"$8",jc:"center",ai:"center",backgroundColor:Number(e.priceChangePercentage24H)>0?"$bgSuccessStrong":"$bgCriticalStrong",borderRadius:"$2",children:(0,y.jsx)(i.NumberSizeableText,{adjustsFontSizeToFit:!0,numberOfLines:2,px:"$1",userSelect:"none",size:"$bodyMdMedium",color:"white",formatter:"priceChange",formatterOptions:{showPlusMinusSigns:!0},children:e[r[1]]})}):(0,y.jsx)(MdPlaceholder,{})]})]}))}))}var ee=(0,o.memo)((function BasicMarketHomeList({category:e,tabIndex:t=0,showMoreAction:r=!1,ordered:n}){var a=(0,S.A)(),s=(0,_.A)(),d=(0,o.useRef)(0),[m,f]=(0,o.useState)([]),h=(0,L.Z)(e.coingeckoIds.length),g=(0,o.useCallback)((0,w.A)((function*(){var t=Date.now();if(t-d.current>$.A.getTimeDurationMs({seconds:45})||h!==e.coingeckoIds.length||0===h&&0===e.coingeckoIds.length){d.current=t;var r=yield p.A.serviceMarket.fetchCategory(e.categoryId,e.coingeckoIds,!0);x.A.runAfterInteractions((function(){f(r)}))}})),[e.categoryId,e.coingeckoIds,h]);(0,k.yk)((0,w.A)((function*(){yield g()})),[g],{pollingInterval:$.A.getTimeDurationMs({seconds:50})}),(0,o.useEffect)((function(){g()}),[g]);var{md:b,gtMd:j,gt2Md:T,gtLg:I,gtXl:H,gt2xl:B}=(0,i.useMedia)(),z=(0,o.useMemo)((function(){var t=e.coingeckoIds?.length?m?.filter((function(t){return e.coingeckoIds.includes(t.coingeckoId)})):m;return n?e.coingeckoIds.reduce((function(e,r){var n=t?.find((function(e){return e?.coingeckoId===r}));return n&&e.push(n),e}),[]):t}),[e.coingeckoIds,m,n]),{sortedListData:N,handleSortTypeChange:D,sortByType:F,setSortByType:Q}=(0,V.K)(z),[ee,te]=(0,o.useState)(["price","priceChangePercentage24H"]),re=(0,o.useCallback)((function(e){s.push(O.FE.MarketDetail,{token:e.coingeckoId})}),[s]),{width:ne}=(0,v.A)(),[oe]=(0,c.useSettingsPersistAtom)(),ae=oe.currencyInfo.symbol,se=(0,o.useCallback)((function(e){return(0,y.jsx)(MarketMdColumn,{item:e,currency:ae,mdColumnKeys:ee,showMoreAction:r})}),[ae,ee,r]),ie=(0,o.useCallback)((function({label:e}){return(0,y.jsxs)(i.XStack,{ai:"center",gap:"$2",children:[(0,y.jsx)(i.Icon,{name:"FilterSortOutline",color:"$iconSubdued",size:"$5"}),(0,y.jsxs)(i.XStack,{ai:"center",gap:"$1",children:[(0,y.jsx)(i.SizableText,{size:"$bodyMd",color:"$textSubdued",children:e}),(0,y.jsx)(i.Icon,{name:"ChevronDownSmallSolid",size:"$4"})]})]})}),[]),[ce,le]=(0,o.useState)("Default"),ue=(0,o.useMemo)((function(){return[{label:a.formatMessage({id:A.ETranslations.global_default}),value:"Default"},{label:a.formatMessage({id:A.ETranslations.market_last_price}),value:"Last price",options:{columnName:"price",order:"desc"}},{label:a.formatMessage({id:A.ETranslations.market_most_24h_volume}),value:"Most 24h volume",options:{columnName:"totalVolume",order:"desc"}},{label:a.formatMessage({id:A.ETranslations.market_most_market_cap}),value:"Most market cap",options:{columnName:"marketCap",order:"desc"}},{label:a.formatMessage({id:A.ETranslations.market_price_change_up}),value:"Price change up",options:{columnName:ee[1],order:"desc"}},{label:a.formatMessage({id:A.ETranslations.market_price_change_down}),value:"Price change down",options:{columnName:ee[1],order:"asc"}}]}),[a,ee]),de=(0,o.useCallback)((function(e){le(e);var t=ue.find((function(t){return t.value===e}));Q(t?.options)}),[ue,Q]),pe=(0,o.useRef)(null),me=(0,o.useCallback)((function({tabIndex:e}){setTimeout((function(){pe.current&&(pe.current.style.contentVisibility=e===t?"visible":"hidden"),e!==t?b&&de("Default"):g()}),0)}),[g,de,b,t]);(0,o.useEffect)((function(){return l.iL.on(l.Tu.SwitchMarketHomeTab,me),function(){l.iL.off(l.Tu.SwitchMarketHomeTab,me)}}),[b,me,t]);var ke=(0,E.YE)(),fe=Y[ke],he=q[ke],ge=(0,o.useCallback)((function(){if(j){var e=1,t=!1,r=!1;if(m){for(var n=0;n<m.length;n+=1){var o=m[n];if(!t)(0,C.r)(o.symbol)&&(t=!0,e+=1);if(!r&&o.isSupportBuy&&(r=!0,e+=1),t&&r)break}switch(e){case 3:return 180;case 2:return 120;default:return 60}}}return 0}),[j,m]),ye=(0,o.useMemo)((function(){return j?[{title:"#",dataIndex:"serialNumber",columnWidth:40,render:function(e){return(0,y.jsx)(i.SizableText,{size:"$bodyMd",color:"$textSubdued",userSelect:"none",children:null!=e?e:"-"})},renderSkeleton:function(){return(0,y.jsx)(i.Skeleton,{w:"$4",h:"$3"})}},{title:a.formatMessage({id:A.ETranslations.global_name}),dataIndex:"symbol",columnWidth:140,render:function(e,t){return(0,y.jsxs)(i.XStack,{gap:"$3",ai:"center",children:[(0,y.jsx)(R.t,{uri:t.image,size:"$8"}),(0,y.jsxs)(i.YStack,{width:"$24",children:[(0,y.jsx)(i.SizableText,{size:"$bodyLgMedium",numberOfLines:1,userSelect:"none",children:e.toUpperCase()}),(0,y.jsx)(i.SizableText,{size:"$bodySm",color:"$textSubdued",numberOfLines:1,userSelect:"none",children:t.name})]})]})},renderSkeleton:function(){return(0,y.jsxs)(i.XStack,{gap:"$3",children:[(0,y.jsx)(i.Skeleton,{w:"$8",h:"$8",radius:"round"}),(0,y.jsxs)(i.YStack,{gap:"$2",children:[(0,y.jsx)(i.Skeleton,{w:"$16",h:"$3"}),(0,y.jsx)(i.Skeleton,{w:"$24",h:"$3"})]})]})}},{title:"",dataIndex:"trade",columnWidth:ge(),renderSkeleton:function(){return(0,y.jsx)(i.Skeleton,{w:"100%",h:"$3"})},render:function(e,t){return(0,y.jsx)(MarketListTradeButton,{isSupportBuy:t.isSupportBuy,coinGeckoId:t.coingeckoId,symbol:t.symbol})}},{title:a.formatMessage({id:A.ETranslations.global_price}),dataIndex:"price",align:"right",columnProps:{flexGrow:1,flexBasis:0},render:function(e,t){return(0,y.jsx)(X.D,{size:"$bodyMd",price:e,tokenName:t.name,tokenSymbol:t.symbol,lastUpdated:t.lastUpdated})},renderSkeleton:function(){return(0,y.jsx)(i.Skeleton,{w:"$20",h:"$3"})}},H?{title:a.formatMessage({id:A.ETranslations.market_one_hour_percentage}),align:"right",dataIndex:"priceChangePercentage1H",columnProps:{flexGrow:1,flexBasis:0},render:function(e){return(0,y.jsx)(K.E,{children:e})},renderSkeleton:function(){return(0,y.jsx)(i.Skeleton,{w:"$10",h:"$3"})}}:void 0,T?{title:a.formatMessage({id:A.ETranslations.market_twenty_four_hour_percentage}),columnProps:{flexGrow:1,flexBasis:0},align:"right",dataIndex:"priceChangePercentage24H",render:function(e){return(0,y.jsx)(K.E,{children:e})},renderSkeleton:function(){return(0,y.jsx)(i.Skeleton,{w:"$10",h:"$3"})}}:void 0,B?{title:a.formatMessage({id:A.ETranslations.market_seven_day_percentage}),align:"right",columnProps:{flexGrow:1,flexBasis:0},dataIndex:"priceChangePercentage7D",render:function(e){return(0,y.jsx)(K.E,{children:e})},renderSkeleton:function(){return(0,y.jsx)(i.Skeleton,{w:"$10",h:"$3"})}}:void 0,H?{title:a.formatMessage({id:A.ETranslations.market_24h_vol_usd}),dataIndex:"totalVolume",columnProps:{flexGrow:1,flexBasis:0},align:"right",render:function(e){return(0,y.jsx)(i.NumberSizeableText,{userSelect:"none",size:"$bodyMd",formatter:"marketCap",formatterOptions:{currency:ae},children:e||"-"})},renderSkeleton:function(){return(0,y.jsx)(i.Skeleton,{w:"$20",h:"$3"})}}:void 0,I?{title:a.formatMessage({id:A.ETranslations.global_market_cap}),dataIndex:"marketCap",columnProps:{flexGrow:1,flexBasis:0},align:"right",render:function(e){return(0,y.jsx)(i.NumberSizeableText,{userSelect:"none",size:"$bodyMd",formatter:"marketCap",formatterOptions:{currency:ae},children:e||"-"})},renderSkeleton:function(){return(0,y.jsx)(i.Skeleton,{w:"$20",h:"$3"})}}:void 0,B?{title:a.formatMessage({id:A.ETranslations.market_last_seven_days}),dataIndex:"sparkline",columnProps:{flexGrow:1,flexBasis:0,minWidth:100},align:"right",renderSkeleton:function(){return(0,y.jsx)(i.Skeleton,{w:"$20",h:"$3"})},render:function(e,t){return(0,y.jsx)(i.View,{children:(0,y.jsx)(G,{data:e,width:100,height:40,lineColor:t.priceChangePercentage7D&&Number(t.priceChangePercentage7D)>=0?fe[0]:fe[1],linearGradientColor:t.priceChangePercentage7D&&Number(t.priceChangePercentage7D)>=0?he[0]:he[1]})})}}:void 0,{title:"",dataIndex:"action",columnWidth:88,align:"center",renderSkeleton:function(){return null},render:function(e,n){return(0,y.jsxs)(i.XStack,{flex:1,children:[(0,y.jsx)(i.Stack,{flex:1,ai:"center",children:(0,y.jsx)(W.J,{coingeckoId:n.coingeckoId,tabIndex:t,from:P.N.catalog},n.coingeckoId)}),(0,y.jsx)(i.Stack,{flex:1,ai:"center",children:(0,y.jsx)(U,{isSupportBuy:n.isSupportBuy,showMoreAction:r,coingeckoId:n.coingeckoId,symbol:n.symbol})})]})}}]:[{title:"",dataIndex:"serialNumber",columnProps:{flex:1,width:void 0,px:0},render:function(e,t){return se(t)},renderSkeleton:function(){return(0,y.jsx)(TableMdSkeletonRow,{})}}]}),[he,ae,T,B,I,j,H,a,fe,ge,se,r,t]),be=(0,o.useCallback)((function(e){return{onPress:b?void 0:function(){return re(e)}}}),[b,re]),we=(0,o.useCallback)((function(e){if(!["sparkline","action"].includes(e.dataIndex))return{onSortTypeChange:function(t){D?.({columnName:e.dataIndex,order:t})}}}),[D]),Se=(0,o.useMemo)((function(){return j?Z:u.Ay.isNativeAndroid?{width:ne}:void 0}),[j,ne]);return u.Ay.isNativeAndroid&&!N?.length?(0,y.jsx)(i.YStack,{flex:1,ai:"center",jc:"center",children:(0,y.jsx)(i.Spinner,{size:"large"})}):(0,y.jsxs)(y.Fragment,{children:[j?void 0:(0,y.jsx)(i.YStack,{px:"$5",borderBottomWidth:M.A.hairlineWidth,borderBottomColor:"$borderSubdued",children:(0,y.jsx)(i.XStack,{h:"$11",ai:"center",justifyContent:"space-between",children:(0,y.jsx)(i.Select,{items:ue,title:a.formatMessage({id:A.ETranslations.market_sort_by}),value:ce,onChange:de,renderTrigger:ie})})}),(0,y.jsx)(i.YStack,{flex:1,ref:pe,$gtMd:{pt:"$3"},"data-sentry-element":"YStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx",children:(0,y.jsx)(i.Table,{headerRowProps:J,showBackToTopButton:!0,stickyHeaderHiddenOnScroll:!0,onRow:be,onHeaderRow:we,rowProps:Se,showHeader:j,columns:ye,dataSource:N,TableFooterComponent:j?(0,y.jsx)(i.Stack,{height:60}):void 0,extraData:j?void 0:ee,TableEmptyComponent:u.Ay.isNativeAndroid?null:(0,y.jsx)(ListEmptyComponent,{columns:ye}),"data-sentry-element":"Table","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeList.tsx"})})]})})),te=r(310944);function MarketWatchList_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function MarketWatchList_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MarketWatchList_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MarketWatchList_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function RecommendItem({icon:e,checked:t=!1,onChange:r,tokenName:n,symbol:a,coingeckoId:s}){var{sharedFrameStyles:c}=(0,o.useMemo)((function(){return(0,i.getSharedButtonStyles)({disabled:!1,loading:!1})}),[]);return(0,y.jsxs)(i.XStack,MarketWatchList_objectSpread(MarketWatchList_objectSpread({userSelect:"none",flexGrow:1,flexBasis:0,justifyContent:"space-between",px:u.Ay.isExtensionUiPopup?"$3":"$4",py:u.Ay.isExtensionUiPopup?"$1.5":"$3.5",borderRadius:"$3",onPress:function(){r(!t,s)},ai:"center"},c),{},{"data-sentry-element":"XStack","data-sentry-component":"RecommendItem","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketWatchList.tsx",children:[(0,y.jsxs)(i.XStack,{gap:"$3",ai:"center",flexShrink:1,"data-sentry-element":"XStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketWatchList.tsx",children:[(0,y.jsx)(R.t,{uri:e,size:"$8","data-sentry-element":"MarketTokenIcon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketWatchList.tsx"}),(0,y.jsxs)(i.YStack,{flexShrink:1,"data-sentry-element":"YStack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketWatchList.tsx",children:[(0,y.jsx)(i.SizableText,{size:"$bodyLgMedium",numberOfLines:1,"data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketWatchList.tsx",children:a.toUpperCase()}),(0,y.jsx)(i.SizableText,{size:"$bodyMd",color:"$textSubdued",flexShrink:1,numberOfLines:1,"data-sentry-element":"SizableText","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketWatchList.tsx",children:n})]})]}),t?(0,y.jsx)(i.Icon,{name:"CheckRadioSolid",size:"$6",color:"$iconActive"}):(0,y.jsx)(i.Stack,{w:"$6",h:"$6"})]}))}var re=8;function MarketWatchList({category:e}){var t=(0,S.A)(),[{data:r,isMounted:n}]=(0,te.Kv)(),a=(0,N.B)(),s=(0,o.useMemo)((function(){return e?.recommendedTokens?.slice(0,re)?.map((function(e){return e.coingeckoId}))||[]}),[e.recommendedTokens]),[c,l]=(0,o.useState)(s),d=(0,o.useCallback)((function(e,t){l((function(r){return e?[...r,t]:r.filter((function(e){return e!==t}))}))}),[]),p=(0,o.useCallback)((function(){a.addIntoWatchList(c),setTimeout((function(){l(s)}),50)}),[a,c,s]),{gtMd:m}=(0,i.useMedia)(),k=(0,o.useMemo)((function(){return(0,y.jsx)(i.Button,{width:"100%",size:"large",disabled:!c.length,variant:"primary",onPress:p,children:t.formatMessage({id:A.ETranslations.market_add_number_tokens},{number:c.length||0})})}),[c.length,p,t]),f=(0,o.useMemo)((function(){return{categoryId:"all",coingeckoIds:r?.map((function({coingeckoId:e}){return e}))}}),[r]),h=(0,o.useCallback)((function(){return e?.recommendedTokens?(0,y.jsxs)(y.Fragment,{children:[(0,y.jsxs)(i.ScrollView,{contentContainerStyle:{ai:"center"},px:"$5",py:u.Ay.isExtensionUiPopup?"$5":"$8",children:[(0,y.jsx)(i.SizableText,{size:u.Ay.isExtensionUiPopup?"$headingXl":"$heading3xl",children:t.formatMessage({id:A.ETranslations.market_empty_watchlist_title})}),(0,y.jsx)(i.SizableText,{size:u.Ay.isExtensionUiPopup?"$bodyMdMedium":"$bodyLgMedium",pt:"$2",children:t.formatMessage({id:A.ETranslations.market_empty_watchlist_desc})}),(0,y.jsxs)(i.YStack,{pt:u.Ay.isExtensionUiPopup?"$5":"$8",gap:"$2.5",flexWrap:"wrap",width:"100%",$gtMd:{maxWidth:480},children:[new Array(Math.ceil(re/2)).fill(0).map((function(t,r){return(0,y.jsx)(i.XStack,{gap:"$2.5",children:new Array(2).fill(0).map((function(t,n){var o=e.recommendedTokens?.[2*r+n];return o?(0,y.jsx)(RecommendItem,{coingeckoId:o.coingeckoId,checked:c.includes(o.coingeckoId),icon:o.iconUrl,symbol:o.symbol,tokenName:o.name,onChange:d},o.coingeckoId):null}))},r)})),m?(0,y.jsx)(i.YStack,{pt:"$8",children:k}):null]})]}),m?null:(0,y.jsx)(i.YStack,{p:"$5",children:k})]}):null}),[e.recommendedTokens,c,k,m,d,t]);return n?0===r?.length?h():(0,y.jsx)(ee,{showMoreAction:!0,ordered:!0,category:f}):null}var ne=r(802172);function MarketHome_ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}var oe,ae=(0,o.forwardRef)((function BasicAnimatedIcon({normalColor:e,selectedColor:t},r){var[n,a]=(0,o.useState)(t),s=(0,o.useRef)(!1);return(0,o.useImperativeHandle)(r,(function(){return{setIsSelected:function(r){s.current=r,a(r?t:e)}}}),[e,t]),(0,o.useEffect)((function(){n!==e&&n!==t&&a(s.current?t:e)}),[t,e,n]),(0,y.jsx)(i.Icon,{name:"StarOutline",color:n,size:"$4.5",px:"$1","data-sentry-element":"Icon","data-sentry-component":"BasicAnimatedIcon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/MarketHome.tsx"})}));function MarketHome(){var{screenWidth:e,pageWidth:t}=(0,f.A)();null==oe&&(oe=new a.A.Value(t)),(0,o.useEffect)((function(){oe&&a.A.timing(oe,{toValue:t,duration:400,easing:s.A.inOut(s.A.quad),useNativeDriver:!1}).start()}),[t]);var{result:r}=(0,k.yk)((function(){return p.A.serviceMarket.fetchCategories()}),[],{revalidateOnReconnect:!0}),{gtMd:c}=(0,i.useMedia)(),d=(0,o.useMemo)((function(){return r?.map((function(e,t){return{title:e.name,page:function(){return 0===t?(0,y.jsx)(MarketWatchList,{category:e}):(0,y.jsx)(ee,{category:e,tabIndex:t})}}}))||[]}),[r]),m=(0,o.useRef)(null),h=(0,o.useMemo)((function(){return{showHorizontalScrollButton:!c&&u.Ay.isRuntimeBrowser,renderItem:function(e,t,r){return 0!==t||c?(0,y.jsx)(i.Tab.SelectedLabel,function MarketHome_objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?MarketHome_ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):MarketHome_ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}({},r)):(0,y.jsx)(ae,{ref:m,normalColor:r?.normalColor,selectedColor:r?.selectedColor})}}}),[c]),g=(0,o.useCallback)((function(e){m?.current?.setIsSelected?.(0===e),l.iL.emit(l.Tu.SwitchMarketHomeTab,{tabIndex:e})}),[]),b=(0,o.useCallback)((function(){return d.length?u.Ay.isNativeAndroid?(0,y.jsx)(i.Tab,{disableRefresh:!0,data:d,onSelectedPageIndex:g}):(0,y.jsx)(i.Tab.Page,{data:d,contentItemWidth:oe,contentWidth:e,headerProps:h,onSelectedPageIndex:g,windowSize:3}):(0,y.jsx)(i.Stack,{flex:1,ai:"center",jc:"center",children:(0,y.jsx)(i.Spinner,{size:"large"})})}),[g,h,d,e]);return(0,y.jsxs)(i.Page,{"data-sentry-element":"Page","data-sentry-component":"MarketHome","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/MarketHome.tsx",children:[c?(0,y.jsx)(MarketHomeHeader,{}):(0,y.jsx)(MarketHomeHeader_md_MarketHomeHeader,{}),(0,y.jsx)(i.Page.Body,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/MarketHome.tsx",children:b()})]})}function MarketHomeWithProvider(){return(0,y.jsx)(m.b8,{config:{sceneName:d.Zs.home,sceneUrl:""},enabledNum:[0],"data-sentry-element":"AccountSelectorProviderMirror","data-sentry-component":"MarketHomeWithProvider","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/MarketHome.tsx",children:(0,y.jsx)(ne.m,{storeName:c.EJotaiContextStoreNames.marketWatchList,"data-sentry-element":"MarketWatchListProviderMirror","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/MarketHome.tsx",children:(0,y.jsx)(MarketHome,{"data-sentry-element":"MarketHome","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/MarketHome.tsx"})})})}},802172:(e,t,r)=>{r.d(t,{m:()=>u});var n=r(324586),o=r(514041),a=r(2577),s=r(597102),i=r(310944),c=r(907481),l=r(831085);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var u=(0,o.memo)((function(e){var{children:t,storeName:r}=e,n=(0,c.z)(r),o=a.A.getOrCreateStore(n);return(0,l.jsxs)(l.Fragment,{children:[(0,l.jsx)(s.H,_objectSpread({},n)),(0,l.jsx)(i.Hn,{store:o,children:t})]})}));u.displayName="MarketWatchListProviderMirror"},217715:(e,t,r)=>{r.d(t,{I:()=>MarketHomeHeaderSearchBar});var n=r(514041),o=r(908867),a=r(490343),s=r(498356),i=r(334439),c=r(193068),l=r(390574),u=r(747268),d=r(506851),p=r(89345),m=r(831085),k=u.H.SearchInPage;function MarketHomeHeaderSearchBar(){var e=(0,o.A)(),t=(0,s.A)(),r=(0,n.useCallback)((function(){t.pushModal(c.ry.UniversalSearchModal,{screen:l.j.UniversalSearch,params:{filterType:d.j.MarketToken}})}),[t]);return(0,p.U)(k,r),(0,m.jsxs)(a.XStack,{$gtMd:{width:280},"data-sentry-element":"XStack","data-sentry-component":"MarketHomeHeaderSearchBar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeHeaderSearchBar.tsx",children:[(0,m.jsx)(a.SearchBar,{placeholder:e.formatMessage({id:i.ETranslations.global_search_tokens}),containerProps:{w:"100%"},$gtMd:{size:"small"},addOns:[{label:(0,m.jsx)(a.Shortcut,{shortcutKey:k})}],"data-sentry-element":"SearchBar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeHeaderSearchBar.tsx"},"MarketHomeSearchInput"),(0,m.jsx)(a.View,{position:"absolute",top:0,left:0,right:0,bottom:0,onPress:r,"data-sentry-element":"View","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketHomeHeaderSearchBar.tsx"})]})}},172120:(e,t,r)=>{r.d(t,{J:()=>f});var n=r(324586),o=r(839850),a=r(514041),s=r(908867),i=r(490343),c=r(153763),l=r(318822),u=r(334439),d=r(296827),p=r(450255),m=r(831085),k=["coingeckoId","size","tabIndex","from"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var f=(0,a.memo)((function BasicMarketStar(e){var{coingeckoId:t,size:r,tabIndex:n,from:f}=e,h=(0,o.A)(e,k),g=(0,s.A)(),y=(0,p.B)(),[b,w]=(0,a.useState)((function(){return y.isInWatchList(t)})),S=(0,c.E)(),{gtMd:x}=(0,i.useMedia)(),M=(0,a.useCallback)((function({tabIndex:e}){e===n&&w(y.isInWatchList(t))}),[y,t,n]);(0,a.useEffect)((function(){if(x&&n)return l.iL.on(l.Tu.SwitchMarketHomeTab,M),function(){l.iL.off(l.Tu.SwitchMarketHomeTab,M)}}),[x,M,n]),(0,a.useEffect)((function(){S&&w(y.isInWatchList(t))}),[y,t,S]);var v=(0,a.useCallback)((function(){b?(y.removeFormWatchList(t),d.U.market.token.removeFromWatchlist({tokenSymbol:t,removeWatchlistFrom:f})):(y.addIntoWatchList(t),d.U.market.token.addToWatchList({tokenSymbol:t,addWatchlistFrom:f})),w(!b)}),[b,y,t,f]);return(0,m.jsx)(i.IconButton,_objectSpread(_objectSpread({title:g.formatMessage({id:b?u.ETranslations.market_remove_from_watchlist:u.ETranslations.market_add_to_watchlist}),icon:b?"StarSolid":"StarOutline",variant:"tertiary",size:r,iconSize:r?void 0:"$5",iconProps:{color:b?"$iconActive":"$iconDisabled"},onPress:v},h),{},{"data-sentry-element":"IconButton","data-sentry-component":"BasicMarketStar","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketStar.tsx"}))}))},202338:(e,t,r)=>{r.d(t,{t:()=>s});var n=r(514041),o=r(490343),a=r(831085);var s=(0,n.memo)((function BasicMarketTokenIcon({uri:e,size:t}){return e?(0,a.jsxs)(o.Image,{size:t,circular:!0,"data-sentry-element":"Image","data-sentry-component":"BasicMarketTokenIcon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketTokenIcon.tsx",children:[(0,a.jsx)(o.Image.Source,{source:{uri:decodeURIComponent(e)},"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketTokenIcon.tsx"}),(0,a.jsx)(o.Image.Fallback,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketTokenIcon.tsx",children:(0,a.jsx)(o.Stack,{bg:"$bgStrong",ai:"center",jc:"center",width:"100%",height:"100%","data-sentry-element":"Stack","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketTokenIcon.tsx",children:(0,a.jsx)(o.Icon,{name:"CoinOutline",size:"$6",color:"$iconSubdued","data-sentry-element":"Icon","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketTokenIcon.tsx"})})}),(0,a.jsx)(o.Image.Loading,{"data-sentry-element":"unknown","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketTokenIcon.tsx",children:(0,a.jsx)(o.Skeleton,{width:"100%",height:"100%",radius:"round","data-sentry-element":"Skeleton","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketTokenIcon.tsx"})})]}):(0,a.jsx)(o.Skeleton,{width:t,height:t})}))},378302:(e,t,r)=>{r.d(t,{D:()=>MarketTokenPrice,u:()=>useTokenPrice});var n=r(324586),o=r(839850),a=r(797331),s=r.n(a),i=r(230414),c=r(514041),l=r(490343),u=r(471169),d=r(831085),p=["price","tokenName","tokenSymbol","lastUpdated","size"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var m=new(function(){function MarketTokenPriceEvent(){this.tokenPriceMap=new Map,this.priceChangedListenerMap=new Map}var e=MarketTokenPriceEvent.prototype;return e.buildKey=function buildKey(e,t){return`${e}-${t}`},e.updateTokenPrice=function updateTokenPrice({name:e,symbol:t,price:r,lastUpdated:n}){var o=this.buildKey(e,t),{lastUpdated:a=0}=this.tokenPriceMap.get(e)||{};n>a&&(this.tokenPriceMap.set(o,{price:r,lastUpdated:n}),(this.priceChangedListenerMap.get(o)||[]).forEach((function(e){return e()})))},e.getTokenPrice=function getTokenPrice(e,t){var r=this.buildKey(e,t);return this.tokenPriceMap.get(r)?.price||"-"},e.onPriceChange=function onPriceChange(e,t,r){var n=this,o=this.buildKey(e,t),a=this.priceChangedListenerMap.get(o)||[],i=s()(r,200);return a.push(i),this.priceChangedListenerMap.set(o,a),function(){var e=n.priceChangedListenerMap.get(o)||[];n.priceChangedListenerMap.set(o,e.filter((function(e){return e!==i})))}},(0,i.A)(MarketTokenPriceEvent)}()),useTokenPrice=function({name:e,symbol:t,price:r,lastUpdated:n}){var[o,a]=(0,c.useState)(0);return(0,c.useMemo)((function(){m.updateTokenPrice({name:e,symbol:t,price:r,lastUpdated:n})}),[n,e,r,t]),(0,c.useLayoutEffect)((function(){return m.onPriceChange(e,t,(function(){a((function(e){return e+1}))}))}),[n,e,r,t]),(0,c.useMemo)((function(){return m.getTokenPrice(e,t)}),[e,t,o])};function MarketTokenPrice(e){var{price:t,tokenName:r,tokenSymbol:n,lastUpdated:a,size:s}=e,i=(0,o.A)(e,p),[m]=(0,u.useSettingsPersistAtom)(),k=m.currencyInfo.symbol,f=(0,c.useMemo)((function(){return a?new Date(a).getTime():Date.now()}),[a]),h=useTokenPrice({name:r,price:t,symbol:n,lastUpdated:f});return(0,d.jsx)(l.NumberSizeableText,_objectSpread(_objectSpread({userSelect:"none",formatter:"price",size:s,formatterOptions:{currency:k}},i),{},{"data-sentry-element":"NumberSizeableText","data-sentry-component":"MarketTokenPrice","data-sentry-source-file":"/home/runner/work/app-monorepo/app-monorepo/packages/kit/src/views/Market/components/MarketTokenPrice.tsx",children:h}))}},781889:(e,t,r)=>{r.d(t,{E:()=>PriceChangePercentage});var n=r(324586),o=r(839850),a=r(490343),s=(r(663522),r(831085)),i=["children"];function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}function PriceChangePercentage(e){var{children:t}=e,r=(0,o.A)(e,i);return t?(0,s.jsx)(a.NumberSizeableText,_objectSpread(_objectSpread({adjustsFontSizeToFit:!0,numberOfLines:2,userSelect:"none",size:"$bodyMd",formatter:"priceChange",color:Number(t)>0?"$textSuccess":"$textCritical",formatterOptions:{showPlusMinusSigns:!0}},r),{},{children:t})):(0,s.jsx)(a.SizableText,{size:"$bodyMd",children:"-"})}},123890:(e,t,r)=>{r.d(t,{z6:()=>useLazyMarketTradeActions,zl:()=>useMarketTradeActions,KY:()=>useMarketTradeNetwork,Hr:()=>useMarketTradeNetworkId});var n=r(324586),o=r(586330),a=r(514041),s=r(908867),i=r(490343),c=r(334439),l=r(296827),u=r(193068),d=r(180706),p=r(628380),m=r(117746),k=r(584186),f=r(317192),h=r(657355),g=r(625931),y=(0,h.EO)((function(e){var t=(0,g.V)();if("btc"===e)return t.btc})),b=r(619390),w=r(643087),S=r(498356),x=r(162616),M=r(831085);function ownKeys(e,t){var r=Object.keys(e);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(e);t&&(n=n.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),r.push.apply(r,n)}return r}function _objectSpread(e){for(var t=1;t<arguments.length;t++){var r=null!=arguments[t]?arguments[t]:{};t%2?ownKeys(Object(r),!0).forEach((function(t){(0,n.A)(e,t,r[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(r)):ownKeys(Object(r)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(r,t))}))}return e}var useMarketTradeNetwork=function(e){var{detailPlatforms:t,platforms:r={}}=e||{};return(0,a.useMemo)((function(){if(t){var e=Object.values(t),n=e.find((function(e){return e.isNative}));if(n)return n;var o=Object.values(r)[0],a=e.find((function(e){return e.tokenAddress===o}));return null!=a?a:e[0]}}),[t,r])},useMarketTradeNetworkId=function(e,t){return(0,a.useMemo)((function(){var{onekeyNetworkId:r}=e||{};return null!=r?r:y(t)}),[e,t])},useMarketTradeActions=function(e){var t,r,{symbol:n="",name:k}=e||{},h=(0,s.A)(),g=useMarketTradeNetwork(e),y=useMarketTradeNetworkId(g,n),v=(0,S.A)(),{activeAccount:j}=(0,x.LH)({num:0}),A=(0,a.useMemo)((function(){var e;return null!=(e=g?.contract_address)?e:""}),[g]),{isNative:T=!1,tokenAddress:P=""}=g||{},O=(0,a.useCallback)((function(e,t=!0){l.U.market.token.unsupportedToken({name:n,action:e}),t&&i.Dialog.show({title:h.formatMessage({id:c.ETranslations.earn_unsupported_token}),tone:"warning",icon:"ErrorOutline",renderContent:(0,M.jsx)(i.SizableText,{size:"$bodyLg",children:h.formatMessage({id:c.ETranslations.earn_unsupported_token_desc})}),onConfirmText:h.formatMessage({id:c.ETranslations.explore_got_it})})}),[h,n]),I=(0,a.useCallback)((0,o.A)((function*({allowWatchAccount:e}={allowWatchAccount:!1}){if(y)return w.A.serviceAccount.createAddressIfNotExists({walletId:j?.wallet?.id||"",networkId:y,accountId:j?.account?.id,indexedAccountId:j?.indexedAccount?.id},{allowWatchAccount:e})})),[j,y]),$=(0,a.useCallback)((t=(0,o.A)((function*(e){var t=yield I({allowWatchAccount:"buy"===e});if(t&&y)if(yield w.A.serviceFiatCrypto.isTokenSupported({networkId:y,tokenAddress:P,type:e})){var{url:r,build:n}=yield w.A.serviceFiatCrypto.generateWidgetUrl({networkId:y,tokenAddress:P,accountId:t?.id,type:e});r&&n?(0,m.Dr)(r):O(e)}else O(e)})),function(e){return t.apply(this,arguments)}),[I,y,P,O]),C=(0,a.useCallback)((r=(0,o.A)((function*(e){var navigateToSwapPage=function(t){"modal"===e?v.replace(p.u.SwapMainLand,t):v.pushModal(d.r.SwapModal,{screen:p.u.SwapMainLand,params:t})};if(!y)return O("trade",!1),void navigateToSwapPage({importNetworkId:"unknown"});if(yield I()){if(y){var{isSupportSwap:t,isSupportCrossChain:r}=yield w.A.serviceSwap.checkSupportSwap({networkId:y,contractAddress:T?P:A});if(!t&&!r)return O("trade",!1),void navigateToSwapPage({importNetworkId:y});var o=yield w.A.serviceNetwork.getNetwork({networkId:y});navigateToSwapPage({importFromToken:_objectSpread(_objectSpread({},o),{},{logoURI:T?o.logoURI:void 0,contractAddress:P,networkId:y,isNative:T,networkLogoURI:o.logoURI,symbol:n.toUpperCase(),name:k}),swapTabSwitchType:t?b.qX.SWAP:b.qX.BRIDGE})}}else"modal"===e&&v.pop()})),function(e){return r.apply(this,arguments)}),[A,I,T,k,v,y,P,O,n]),H=(0,a.useCallback)((0,o.A)((function*(){var e=yield I();e&&y&&e&&v.pushModal(d.r.StakingModal,{screen:u.Ax.AssetProtocolList,params:{networkId:y,accountId:e.id,indexedAccountId:e.indexedAccountId,symbol:n}})})),[I,v,y,n]),_=(0,a.useMemo)((function(){return(0,f.r)(n)}),[n]);return(0,a.useMemo)((function(){return{onSwap:C,onStaking:H,onBuy:function(){$("buy")},onSell:function(){$("sell")},createAccountIfNotExists:I,canStaking:_}}),[_,I,$,H,C])},useLazyMarketTradeActions=function(e){var[t,r]=(0,a.useState)(null),n=(0,a.useCallback)((0,o.A)((function*(){var t=yield w.A.serviceMarket.fetchMarketTokenDetail(e);return r(t),t})),[e]),s=useMarketTradeActions(t),i=(0,a.useRef)(s);i.current=s;var c=(0,S.A)(),l=(0,a.useCallback)((function(e){var t,r=(t=(0,o.A)((function*(){yield n(),yield k.A.wait(80),yield i.current[e]("modal")})),function callback(){return t.apply(this,arguments)});r()}),[n]),u=(0,a.useCallback)((0,o.A)((function*(){c.pushModal(d.r.SwapModal,{screen:p.u.SwapLazyMarketModal,params:{coinGeckoId:e}})})),[e,c]);return(0,a.useMemo)((function(){return{onSwap:function(){return l("onSwap")},onSwapLazyModal:u,onStaking:function(){return l("onStaking")},onBuy:function(){return l("onBuy")},onSell:function(){return l("onSell")}}}),[l,u])}},610101:(e,t,r)=>{r.d(t,{K:()=>useSortType});var n=r(514041),getNumericValue=function(e,t,r){var n=e[t];return"number"==typeof n?n:"desc"===r?Number.MIN_SAFE_INTEGER:Number.MAX_SAFE_INTEGER},useSortType=function(e,t){var r=(0,n.useRef)(),o=(0,n.useRef)(t);r.current!==e&&(r.current=e),o.current!==t&&(o.current=t,r.current=e);var[a,s]=(0,n.useState)({columnName:"default",order:"desc"}),i=(0,n.useCallback)((function(e){s(e)}),[]),c=(0,n.useMemo)((function(){if(r.current?.length){var t=r.current[0]?.[a?.columnName];if(a?.order)return function(e){return"number"==typeof e||null===e||"-"===e}(t)?r.current?.slice().sort((function(e,t){var r=getNumericValue(e,a.columnName,a.order),n=getNumericValue(t,a.columnName,a.order);return"desc"===a.order?n-r:r-n})):"string"==typeof t?r.current?.slice().sort((function(e,t){var r=e[a.columnName],n=t[a.columnName];return"desc"===a.order?r.localeCompare(n,"en",{sensitivity:"base"}):n.localeCompare(r,"en",{sensitivity:"base"})})):e}return r.current}),[e,a?.columnName,a?.order]);return(0,n.useMemo)((function(){return{sortedListData:c,handleSortTypeChange:i,sortByType:a,setSortByType:s}}),[i,a,c,s])}},450255:(e,t,r)=>{r.d(t,{B:()=>useWatchListAction});var n=r(514041),o=r(908867),a=r(490343),s=r(334439),i=r(310944),useWatchListAction=function(){var e=(0,o.A)(),t=(0,i.qr)(),r=(0,n.useCallback)((function(e){var r={coingeckoId:e};t.current.removeFormWatchList(r)}),[t]),c=(0,n.useCallback)((function(r){var n=Array.isArray(r)?r:[r];t.current.addIntoWatchList(n.map((function(e){return{coingeckoId:e}}))),a.Toast.success({title:e.formatMessage({id:s.ETranslations.market_added_to_watchlist})})}),[t,e]),l=(0,n.useCallback)((function(e){var r={coingeckoId:e};t.current.moveToTop(r)}),[t]),u=(0,n.useCallback)((function(e){return t.current.isInWatchList(e)}),[t]);return(0,n.useMemo)((function(){return{removeFormWatchList:r,addIntoWatchList:c,MoveToTop:l,isInWatchList:u}}),[l,c,u,r])}},317192:(e,t,r)=>{r.d(t,{J:()=>getImportFromToken,r:()=>isSupportStaking});var n=r(625931),o=r(619390),a={networkId:"evm--1",contractAddress:"",name:"Ethereum",symbol:"ETH",decimals:18,isNative:!0,networkLogoURI:"https://uni.onekey-asset.com/static/chain/eth.png"},s={networkId:"evm--1",contractAddress:"0xa0b86991c6218b36c1d19d4a2e9eb0ce3606eb48",name:"USD Coin",symbol:"USDC",decimals:6,isNative:!1,isPopular:!0,networkLogoURI:"https://uni.onekey-asset.com/static/chain/eth.png"},i={networkId:"sol--101",contractAddress:"EPjFWdd5AufqSSqeM2qN1xzybapC8G4wEGGkZwyTDt1v",name:"USDC",symbol:"USDC",decimals:6,isNative:!1,networkLogoURI:"https://uni.onekey-asset.com/static/chain/sol.png"},isSupportStaking=function(e){return["BTC","SBTC","ETH","SOL","APT","ATOM","MATIC"].includes(e.toUpperCase())};function getImportFromToken({networkId:e,tokenSymbol:t,isSupportSwap:r=!0}){var c,l=r?o.qX.SWAP:o.qX.BRIDGE,u=(0,n.V)();switch(e){case u.btc:case u.sbtc:c=a,l=o.qX.BRIDGE;break;case u.eth:case u.holesky:case u.sepolia:c="MATIC"===t?a:s,l=o.qX.SWAP;break;case u.sol:c=i,l=o.qX.SWAP;break;case u.apt:c=a,l=o.qX.BRIDGE}return{importFromToken:c,swapTabSwitchType:l}}}}]);
//# sourceMappingURL=47689.d79191d501.chunk.js.map